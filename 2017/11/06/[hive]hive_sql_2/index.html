<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hive相關語法整理-2(Table) | Popal&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Create Table
CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name  [(col_name data_type [COMMENT col_comment], … [constraint_specification])]  [COMMENT table_comment]  [PARTITIONED">
<meta property="og:type" content="article">
<meta property="og:title" content="Hive相關語法整理-2(Table)">
<meta property="og:url" content="http://yoursite.com/2017/11/06/[hive]hive_sql_2/index.html">
<meta property="og:site_name" content="Popal's Blog">
<meta property="og:description" content="Create Table
CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name  [(col_name data_type [COMMENT col_comment], … [constraint_specification])]  [COMMENT table_comment]  [PARTITIONED">
<meta property="og:updated_time" content="2017-11-07T10:27:57.726Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hive相關語法整理-2(Table)">
<meta name="twitter:description" content="Create Table
CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name  [(col_name data_type [COMMENT col_comment], … [constraint_specification])]  [COMMENT table_comment]  [PARTITIONED">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Popal&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">邊做邊學</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首頁</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/">隨筆</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-[hive]hive_sql_2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/06/[hive]hive_sql_2/" class="article-date">
  <time datetime="2017-11-05T16:00:00.000Z" itemprop="datePublished">2017-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hive/">hive</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Hive相關語法整理-2(Table)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="toc">
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-Table"><span class="toc-text">Create Table</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Alter-Table"><span class="toc-text">Alter Table</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Rename-Table-Name"><span class="toc-text">Rename Table Name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Alter-Table-Properties"><span class="toc-text">Alter Table Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-SerDe-Properties"><span class="toc-text">Add SerDe Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Alter-Either-Table-or-Partition"><span class="toc-text">Alter Either Table or Partition</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Import-Data-to-Table"><span class="toc-text">Import Data to Table</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#load-data"><span class="toc-text">load data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#create-table-…-as-select"><span class="toc-text">create table ….as select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#create-table-…like"><span class="toc-text">create table …like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#from-…insert-select"><span class="toc-text">from …insert select</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Show-Table"><span class="toc-text">Show Table</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Show-Tables"><span class="toc-text">Show Tables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Show-Table-1"><span class="toc-text">Show Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Show-Table-Properties"><span class="toc-text">Show Table Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Show-Create-Table"><span class="toc-text">Show Create Table</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Describe-Table"><span class="toc-text">Describe Table</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#desc-formatted"><span class="toc-text">desc formatted</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#desc-extended"><span class="toc-text">desc extended</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Drop-Table"><span class="toc-text">Drop Table</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#drop-table"><span class="toc-text">drop table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#truncate-table"><span class="toc-text">truncate table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multi-drop-table"><span class="toc-text">multi drop table</span></a></li></ol></li></ol>
</div>

        <h2 id="Create-Table"><a href="#Create-Table" class="headerlink" title="Create Table"></a>Create Table</h2><blockquote>
<p>CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name<br>  [(col_name data_type [COMMENT col_comment], … [constraint_specification])]<br>  [COMMENT table_comment]<br>  [PARTITIONED BY (col_name data_type [COMMENT col_comment], …)]<br>  [CLUSTERED BY (col_name, col_name, …) [SORTED BY (col_name [ASC|DESC], …)] INTO num_buckets BUCKETS]<br>  [SKEWED BY (col_name, col_name, …)                  – (Note: Available in Hive 0.10.0 and later)]<br>     ON ((col_value, col_value, …), (col_value, col_value, …), …)<br>     [STORED AS DIRECTORIES]<br>  [<br>   [ROW FORMAT row_format]<br>   [STORED AS file_format]<br>     | STORED BY ‘storage.handler.class.name’ [WITH SERDEPROPERTIES (…)]  – (Note: Available in Hive 0.6.0 and later)<br>  ]<br>  [LOCATION hdfs_path]<br>  [TBLPROPERTIES (property_name=property_value, …)]   – (Note: Available in Hive 0.6.0 and later)<br>  [AS select_statement];   – (Note: Available in Hive 0.5.0 and later; not supported for external tables)</p>
<p>CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name<br>  LIKE existing_table_or_view_name<br>  [LOCATION hdfs_path];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Example1:</div><div class="line">以下範例為Table建立各種型態欄位</div><div class="line">create table test1(a1 tinyint,a2 smallint,a3 int,a4 bigint);</div><div class="line">create table test2(a1 float,a2 double);</div><div class="line">create table test3(a1 string,a2 varchar(2000),a3 char(4));</div><div class="line">create table test4(a1 boolean,a2 date,a3 timestamp);</div><div class="line">create table test5(a1 map&lt;string,string&gt;,a2 array&lt;string&gt;,a3 struct&lt;c1:string,c2:int,c3:date&gt;);</div><div class="line">create table test5_1(a1 map&lt;string,string&gt;,a2 array&lt;string&gt;,a3 struct&lt;c1:string,c2:int,c3:date&gt;,a4 uniontype&lt;string,int,date&gt;);</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example2:</div><div class="line">建立Partition Table</div><div class="line">create table test6_1(a1 string,a2 int)</div><div class="line">partitioned by(a3 string);</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Example3:</div><div class="line">建立Bluck Table</div><div class="line">create table test6_2(a1 string,a2 int)</div><div class="line">clustered by(a2) </div><div class="line">into 5 buckets;</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Example4:</div><div class="line">CTAS 用法範例</div><div class="line">create table test7 as select &quot;ttt&quot;, concat(&quot;part_&quot;, &quot;aaa&quot;);</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Example5:</div><div class="line">建立外部表格,表格刪除時Table檔案並不會跟著一起被刪除</div><div class="line">create external table if not exists test8(a1 string,a2 int);</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Example6:</div><div class="line">建立暫存表格</div><div class="line">create temporary table if not exists test9(a1 string,a2 int);</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Example7:</div><div class="line">建立與某一個表格相同欄位的表格 (copy 某個Table的欄位)</div><div class="line">create table test10 like test1;	--copy columns from table;</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Example8:</div><div class="line">create table taiwan_area(</div><div class="line">  cityname string COMMENT &quot;行政區名稱&quot;,</div><div class="line">  type string COMMENT &quot;行政區類別&quot;,</div><div class="line">  area float COMMENT &quot;區域面積&quot;,</div><div class="line">  village_num smallint COMMENT &quot;村里數&quot;,</div><div class="line">  neighborhood_num smallint COMMENT &quot;鄰數&quot;,</div><div class="line">  people_num int COMMENT &quot;人口數&quot;,</div><div class="line">  density int COMMENT &quot;人口密度&quot;,</div><div class="line">  zipcode smallint COMMENT &quot;郵遞區號&quot;</div><div class="line">)</div><div class="line">row format serde &apos;org.apache.hadoop.hive.serde2.OpenCSVSerde&apos;</div><div class="line">with SERDEPROPERTIES(</div><div class="line">&quot;separatorChar&quot; = &quot;,&quot;,</div><div class="line">&quot;quoteChar&quot;     = &quot;\&quot;&quot;,</div><div class="line">&quot;escapeChar&quot;    = &quot;\\&quot;</div><div class="line">)</div><div class="line">STORED AS TEXTFILE;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Result:</div><div class="line">hive&gt; desc taiwan_area;</div><div class="line">OK</div><div class="line">cityname                string                  from deserializer</div><div class="line">type                    string                  from deserializer</div><div class="line">area                    string                  from deserializer</div><div class="line">village_num             string                  from deserializer</div><div class="line">neighborhood_num        string                  from deserializer</div><div class="line">people_num              string                  from deserializer</div><div class="line">density                 string                  from deserializer</div><div class="line">zipcode                 string                  from deserializer</div><div class="line">Time taken: 0.254 seconds, Fetched: 8 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Example9:</div><div class="line">create table page_view(</div><div class="line">  viewTime int, </div><div class="line">  userid bigint,</div><div class="line">  page_url string, </div><div class="line">  referrer_url string,</div><div class="line">  ip string comment &apos;IP Address of the User&apos;)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(dt string, country string)</div><div class="line">row format delimited</div><div class="line">   fields terminated by &apos;\001&apos;</div><div class="line">   collection items terminated by &apos;\002&apos;</div><div class="line">   map keys terminated by &apos;\003&apos;</div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Result:</div><div class="line">hive&gt; desc page_view;</div><div class="line">OK</div><div class="line">viewtime                int</div><div class="line">userid                  bigint</div><div class="line">page_url                string</div><div class="line">referrer_url            string</div><div class="line">ip                      string                  IP Address of the User</div><div class="line">dt                      string</div><div class="line">country                 string</div><div class="line"></div><div class="line"># Partition Information</div><div class="line"># col_name              data_type               comment</div><div class="line"></div><div class="line">dt                      string</div><div class="line">country                 string</div><div class="line">Time taken: 0.193 seconds, Fetched: 13 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<p>Example10:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Prepare CSV file:</div><div class="line">CSV檔內容如下:</div><div class="line">test1.csv</div><div class="line">echo 100,1,\&quot;http://www.google.com\&quot;,\&quot;http://www.google.com\&quot;,\&quot;192.168.1.1\&quot; &gt; ~/test1.csv</div><div class="line">echo 200,2,\&quot;http://www.google.com\&quot;,\&quot;http://www.google.com\&quot;,\&quot;192.168.1.2\&quot; &gt;&gt; ~/test1.csv</div><div class="line">echo 150,3,\&quot;http://www.google.com\&quot;,\&quot;http://www.google.com\&quot;,\&quot;192.168.1.3\&quot; &gt;&gt; ~/test1.csv</div><div class="line">echo 300,4,\&quot;http://www.google.com\&quot;,\&quot;http://www.google.com\&quot;,\&quot;192.168.1.4\&quot; &gt;&gt; ~/test1.csv</div><div class="line">直接在Linux系統上使用指令建立以上檔案</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">create table page_view_1(</div><div class="line">  viewTime int, </div><div class="line">  userid bigint,</div><div class="line">  page_url string, </div><div class="line">  referrer_url string,</div><div class="line">  ip string comment &apos;IP Address of the User&apos;)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(dt string, country string)</div><div class="line">row format delimited</div><div class="line">   fields terminated by &apos;,&apos;</div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">使用Load將資料insert至Table</div><div class="line">load data local inpath &quot;/home/hadoop/test1.csv&quot; overwrite into table page_view_1 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Result:</div><div class="line">hive&gt; select * from page_view_1;</div><div class="line">OK</div><div class="line">100     1       &quot;http://www.google.com&quot; &quot;http://www.google.com&quot; &quot;192.168.1.1&quot;   taipei  taiwan</div><div class="line">200     2       &quot;http://www.google.com&quot; &quot;http://www.google.com&quot; &quot;192.168.1.2&quot;   taipei  taiwan</div><div class="line">150     3       &quot;http://www.google.com&quot; &quot;http://www.google.com&quot; &quot;192.168.1.3&quot;   taipei  taiwan</div><div class="line">300     4       &quot;http://www.google.com&quot; &quot;http://www.google.com&quot; &quot;192.168.1.4&quot;   taipei  taiwan</div><div class="line">Time taken: 0.335 seconds, Fetched: 4 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Example11</div><div class="line">Step1:</div><div class="line">建立CSV檔</div><div class="line">test2.csv</div><div class="line">echo 1,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;404\&quot;,100 &gt;~/test2.csv</div><div class="line">echo 2,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;200\&quot;,100 &gt;&gt;~/test2.csv</div><div class="line">echo 3,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;500\&quot;,100 &gt;&gt;~/test2.csv</div><div class="line">echo 4,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;503\&quot;,100 &gt;&gt;~/test2.csv</div><div class="line">echo 5,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;201\&quot;,100 &gt;&gt;~/test2.csv</div><div class="line">echo 6,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;403\&quot;,100 &gt;&gt;~/test2.csv</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Step2:</div><div class="line">create table page_view_2( </div><div class="line">  userid bigint,</div><div class="line">  data struct&lt;page_url:string,ip:string,status:string&gt;,</div><div class="line">  view_count int)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(dt string, country string)</div><div class="line">row format delimited</div><div class="line">   fields terminated by &apos;,&apos;</div><div class="line">   collection items terminated by &apos;\;&apos;</div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Step3:</div><div class="line">load data local inpath &quot;/home/hadoop/test2.csv&quot; overwrite into table page_view_2 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Step4:</div><div class="line">hive&gt; select * from page_view_2;</div><div class="line">OK</div><div class="line">1       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;404\&quot;&quot;&#125;      100     taipei  taiwan</div><div class="line">2       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;200\&quot;&quot;&#125;      100     taipei  taiwan</div><div class="line">3       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;500\&quot;&quot;&#125;      100     taipei  taiwan</div><div class="line">4       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;503\&quot;&quot;&#125;      100     taipei  taiwan</div><div class="line">5       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;201\&quot;&quot;&#125;      100     taipei  taiwan</div><div class="line">6       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;403\&quot;&quot;&#125;      100     taipei  taiwan</div><div class="line">Time taken: 2.183 seconds, Fetched: 6 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Example12:</div><div class="line">Step1:</div><div class="line">create table page_view_3(</div><div class="line">  viewTime int, </div><div class="line">  userid bigint,</div><div class="line">  page_url string, </div><div class="line">  referrer_url string,</div><div class="line">  ip string comment &apos;IP Address of the User&apos;)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(dt string, country string)</div><div class="line">row format serde &apos;org.apache.hadoop.hive.serde2.OpenCSVSerde&apos;</div><div class="line">with serdeproperties(</div><div class="line">&quot;separatorChar&quot; = &quot;,&quot;,</div><div class="line">&quot;quoteChar&quot;     = &quot;\&quot;&quot;,</div><div class="line">&quot;escapeChar&quot;    = &quot;\\&quot;</div><div class="line">) </div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Step2:</div><div class="line">load data local inpath &quot;/home/hadoop/test1.csv&quot; overwrite into table page_view_3 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Step3:</div><div class="line">hive&gt; select * from page_view_3;</div><div class="line">OK</div><div class="line">100     1       http://www.google.com   http://www.google.com   192.168.1.1     taipei  taiwan</div><div class="line">200     2       http://www.google.com   http://www.google.com   192.168.1.2     taipei  taiwan</div><div class="line">150     3       http://www.google.com   http://www.google.com   192.168.1.3     taipei  taiwan</div><div class="line">300     4       http://www.google.com   http://www.google.com   192.168.1.4     taipei  taiwan</div><div class="line">Time taken: 1.003 seconds, Fetched: 4 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Example13</div><div class="line">使用delimited切割欄位,以分號來做為集合區分</div><div class="line">Step1:</div><div class="line">echo 1,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;100\&quot;,\&quot;001\&quot;\;\&quot;test1_001\&quot;\;100 &gt;~/test4.csv</div><div class="line">echo 2,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.2\&quot;\;\&quot;200\&quot;,\&quot;002\&quot;\;\&quot;test1_002\&quot;\;200 &gt;&gt;~/test4.csv</div><div class="line">echo 3,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.3\&quot;\;\&quot;300\&quot;,\&quot;003\&quot;\;\&quot;test1_003\&quot;\;300 &gt;&gt;~/test4.csv</div><div class="line">echo 4,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.4\&quot;\;\&quot;400\&quot;,\&quot;004\&quot;\;\&quot;test1_004\&quot;\;400 &gt;&gt;~/test4.csv</div><div class="line">echo 5,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.5\&quot;\;\&quot;500\&quot;,\&quot;005\&quot;\;\&quot;test1_005\&quot;\;500 &gt;&gt;~/test4.csv</div><div class="line">echo 6,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.6\&quot;\;\&quot;600\&quot;,\&quot;006\&quot;\;\&quot;test1_006\&quot;\;600 &gt;&gt;~/test4.csv</div><div class="line">echo 7,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.7\&quot;\;\&quot;700\&quot;,\&quot;007\&quot;\;\&quot;test1_007\&quot;\;700 &gt;&gt;~/test4.csv</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Step2:</div><div class="line">建立Table</div><div class="line">create table page_view_4( </div><div class="line">  id bigint,</div><div class="line">  data struct&lt;page_url:string,ip:string,status:string&gt;,</div><div class="line">  userdata struct&lt;id:string,name:string,viewcnt:int&gt;</div><div class="line">)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(dt string, country string)</div><div class="line">row format delimited</div><div class="line">   fields terminated by &apos;,&apos;</div><div class="line">   collection items terminated by &quot;\;&quot;</div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Step3:</div><div class="line">load data to page_view_4</div><div class="line">load data local inpath &quot;/home/hadoop/test4.csv&quot; overwrite into table page_view_4 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Step4:</div><div class="line">hive&gt; select * from page_view_4;</div><div class="line">OK</div><div class="line">1       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;100\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;001\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_001\&quot;&quot;,&quot;viewcnt&quot;:100&#125;   taipei  taiwan</div><div class="line">2       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.2\&quot;&quot;,&quot;status&quot;:&quot;\&quot;200\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;002\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_002\&quot;&quot;,&quot;viewcnt&quot;:200&#125;   taipei  taiwan</div><div class="line">3       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.3\&quot;&quot;,&quot;status&quot;:&quot;\&quot;300\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;003\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_003\&quot;&quot;,&quot;viewcnt&quot;:300&#125;   taipei  taiwan</div><div class="line">4       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.4\&quot;&quot;,&quot;status&quot;:&quot;\&quot;400\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;004\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_004\&quot;&quot;,&quot;viewcnt&quot;:400&#125;   taipei  taiwan</div><div class="line">5       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.5\&quot;&quot;,&quot;status&quot;:&quot;\&quot;500\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;005\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_005\&quot;&quot;,&quot;viewcnt&quot;:500&#125;   taipei  taiwan</div><div class="line">6       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.6\&quot;&quot;,&quot;status&quot;:&quot;\&quot;600\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;006\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_006\&quot;&quot;,&quot;viewcnt&quot;:600&#125;   taipei  taiwan</div><div class="line">7       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.7\&quot;&quot;,&quot;status&quot;:&quot;\&quot;700\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;007\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_007\&quot;&quot;,&quot;viewcnt&quot;:700&#125;   taipei  taiwan</div><div class="line">Time taken: 0.13 seconds, Fetched: 7 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Example14:</div><div class="line">使用冒號(:)來做為Map的key,value的區分範例</div><div class="line">Step1:</div><div class="line">echo 1,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;401\&quot;,id:001\;name:test1_001\;count:100 &gt; ~/test5.csv</div><div class="line">echo 2,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.2\&quot;\;\&quot;401\&quot;,id:002\;name:test1_002\;count:200 &gt;&gt; ~/test5.csv</div><div class="line">echo 3,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.3\&quot;\;\&quot;401\&quot;,id:003\;name:test1_003\;count:300 &gt;&gt; ~/test5.csv</div><div class="line">echo 4,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.4\&quot;\;\&quot;401\&quot;,id:004\;name:test1_004\;count:400 &gt;&gt; ~/test5.csv</div><div class="line">echo 5,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.5\&quot;\;\&quot;401\&quot;,id:005\;name:test1_005\;count:500 &gt;&gt; ~/test5.csv</div><div class="line">echo 6,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.6\&quot;\;\&quot;401\&quot;,id:006\;name:test1_006\;count:600 &gt;&gt; ~/test5.csv</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Step2:</div><div class="line">create table page_view_5( </div><div class="line">  id bigint,</div><div class="line">  data struct&lt;page_url:string,ip:string,status:string&gt;,</div><div class="line">  userdata map&lt;string,string&gt;</div><div class="line">)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(dt string, country string)</div><div class="line">row format delimited</div><div class="line">   fields terminated by &apos;,&apos;</div><div class="line">   collection items terminated by &quot;\;&quot;</div><div class="line">   map keys terminated by &quot;\:&quot;</div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Step3:</div><div class="line">load data local inpath &quot;/home/hadoop/test5.csv&quot; overwrite into table page_view_5 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Step4:</div><div class="line">hive&gt; select * from page_view_5;</div><div class="line">OK</div><div class="line">1       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;001&quot;,&quot;name&quot;:&quot;test1_001&quot;,&quot;count&quot;:&quot;100&quot;&#125;   taipei  taiwan</div><div class="line">2       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.2\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;002&quot;,&quot;name&quot;:&quot;test1_002&quot;,&quot;count&quot;:&quot;200&quot;&#125;   taipei  taiwan</div><div class="line">3       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.3\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;003&quot;,&quot;name&quot;:&quot;test1_003&quot;,&quot;count&quot;:&quot;300&quot;&#125;   taipei  taiwan</div><div class="line">4       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.4\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;004&quot;,&quot;name&quot;:&quot;test1_004&quot;,&quot;count&quot;:&quot;400&quot;&#125;   taipei  taiwan</div><div class="line">5       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.5\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;005&quot;,&quot;name&quot;:&quot;test1_005&quot;,&quot;count&quot;:&quot;500&quot;&#125;   taipei  taiwan</div><div class="line">6       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.6\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;006&quot;,&quot;name&quot;:&quot;test1_006&quot;,&quot;count&quot;:&quot;600&quot;&#125;   taipei  taiwan</div><div class="line">Time taken: 1.217 seconds, Fetched: 6 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Example15:</div><div class="line">Step1:</div><div class="line">echo 1,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.1\&quot;\;\&quot;401\&quot;,id:001\;name:test1_001\;gender:F\;count:100,300\;400\;500 &gt; ~/test6.csv</div><div class="line">echo 2,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.2\&quot;\;\&quot;401\&quot;,id:002\;name:test1_002\;gender:M\;count:200,600\;700\;800 &gt;&gt; ~/test6.csv</div><div class="line">echo 3,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.3\&quot;\;\&quot;401\&quot;,id:003\;name:test1_003\;gender:F\;count:300,100\;200\;300 &gt;&gt; ~/test6.csv</div><div class="line">echo 4,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.4\&quot;\;\&quot;401\&quot;,id:004\;name:test1_004\;gender:M\;count:400,400\;500\;600 &gt;&gt; ~/test6.csv</div><div class="line">echo 5,\&quot;http://www.google.com\&quot;\;\&quot;192.168.1.5\&quot;\;\&quot;401\&quot;,id:005\;name:test1_005\;gender:F\;count:500,250\;100\;900 &gt;&gt; ~/test6.csv</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Step2:</div><div class="line">create table page_view_6( </div><div class="line">  id bigint,</div><div class="line">  data struct&lt;page_url:string,ip:string,status:string&gt;,</div><div class="line">  userdata map&lt;string,string&gt;,</div><div class="line">  countlist array&lt;int&gt;</div><div class="line">)</div><div class="line">comment &apos;This is the page view table&apos;</div><div class="line">partitioned by(city string, country string)</div><div class="line">row format delimited</div><div class="line">   fields terminated by &apos;,&apos;</div><div class="line">   collection items terminated by &quot;\;&quot;</div><div class="line">   map keys terminated by &quot;\:&quot;</div><div class="line">stored as textfile;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Step3:</div><div class="line">load data local inpath &quot;/home/hadoop/test6.csv&quot; overwrite into table page_view_6 partition(city=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Step4:</div><div class="line">hive&gt; select * from page_view_6;</div><div class="line">OK</div><div class="line">1       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;001&quot;,&quot;name&quot;:&quot;test1_001&quot;,&quot;gender&quot;:&quot;F&quot;,&quot;count&quot;:&quot;100&quot;&#125;      [300,400,500]   taipei  taiwan</div><div class="line">2       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.2\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;002&quot;,&quot;name&quot;:&quot;test1_002&quot;,&quot;gender&quot;:&quot;M&quot;,&quot;count&quot;:&quot;200&quot;&#125;      [600,700,800]   taipei  taiwan</div><div class="line">3       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.3\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;003&quot;,&quot;name&quot;:&quot;test1_003&quot;,&quot;gender&quot;:&quot;F&quot;,&quot;count&quot;:&quot;300&quot;&#125;      [100,200,300]   taipei  taiwan</div><div class="line">4       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.4\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;004&quot;,&quot;name&quot;:&quot;test1_004&quot;,&quot;gender&quot;:&quot;M&quot;,&quot;count&quot;:&quot;400&quot;&#125;      [400,500,600]   taipei  taiwan</div><div class="line">5       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.5\&quot;&quot;,&quot;status&quot;:&quot;\&quot;401\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;005&quot;,&quot;name&quot;:&quot;test1_005&quot;,&quot;gender&quot;:&quot;F&quot;,&quot;count&quot;:&quot;500&quot;&#125;      [250,100,900]   taipei  taiwan</div><div class="line">Time taken: 1.126 seconds, Fetched: 5 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<h2 id="Alter-Table"><a href="#Alter-Table" class="headerlink" title="Alter Table"></a>Alter Table</h2><h3 id="Rename-Table-Name"><a href="#Rename-Table-Name" class="headerlink" title="Rename Table Name"></a>Rename Table Name</h3><blockquote>
<p>alter table table_name rename to new_table_name;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example1:</div><div class="line">將Table更改名稱或搬移至其他資料庫</div><div class="line">alter table page_view_3 rename to pv_3;</div><div class="line">alter table pv_3 rename to test.pv_3;</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="Alter-Table-Properties"><a href="#Alter-Table-Properties" class="headerlink" title="Alter Table Properties"></a>Alter Table Properties</h3><blockquote>
<p>alter table table_name set tblproperties table_properties;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Example1:</div><div class="line">修改Table的屬性</div><div class="line">alter table test.pv_3 set tblproperties (&quot;comment&quot; = &quot;page_view_3 rename to pv_3&quot;);</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="Add-SerDe-Properties"><a href="#Add-SerDe-Properties" class="headerlink" title="Add SerDe Properties"></a>Add SerDe Properties</h3><blockquote>
<p>ALTER TABLE table_name [PARTITION partition_spec]<br>  SET SERDE serde_class_name [WITH SERDEPROPERTIES serde_properties];</p>
<p>ALTER TABLE table_name [PARTITION partition_spec] SET SERDEPROPERTIES serde_properties;<br>  serde_properties:<br>      : (property_name = property_value, property_name = property_value, … )<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter table test.pv_3 set serdeproperties(&apos;field.delim&apos;=&apos;\u0001&apos;);</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="Alter-Either-Table-or-Partition"><a href="#Alter-Either-Table-or-Partition" class="headerlink" title="Alter Either Table or Partition"></a>Alter Either Table or Partition</h3><blockquote>
<p>ALTER TABLE table_name [PARTITION partition_spec] SET FILEFORMAT file_format;<br>file_format:<br>    :sequence,textfile,rcfile,orc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Example1</div><div class="line">alter table test.pv_3 set fileformat textfile;</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>ALTER TABLE table_name [PARTITIONpartitionSpec] SET LOCATION “newlocation”<br>修改表格存放路徑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">alter table test.pv_3 set location &quot;/user/hadoop/data&quot;</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h2 id="Import-Data-to-Table"><a href="#Import-Data-to-Table" class="headerlink" title="Import Data to Table"></a>Import Data to Table</h2><h3 id="load-data"><a href="#load-data" class="headerlink" title="load data"></a>load data</h3><blockquote>
<p>LOAD DATA [local] INPATH ‘hdfs_file_or_directory_path’<br>  [OVERWRITE] INTO TABLE tablename<br>  [PARTITION (partcol1=val1, partcol2=val2 …)]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">Example1:</div><div class="line">load data local inpath &quot;/home/hadoop/test1.csv&quot; overwrite into table page_view_3 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div><div class="line"></div><div class="line">Result:</div><div class="line">hive&gt; select * from page_view_3;</div><div class="line">OK</div><div class="line">Time taken: 0.106 seconds</div><div class="line">hive&gt; load data local inpath &quot;/home/hadoop/test1.csv&quot; overwrite into table page_view_3 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div><div class="line">Loading data to table default.page_view_3 partition (dt=taipei, country=taiwan)</div><div class="line">OK</div><div class="line">Time taken: 0.658 seconds</div><div class="line">hive&gt; select * from page_view_3;</div><div class="line">OK</div><div class="line">100     1       http://www.google.com   http://www.google.com   192.168.1.1     taipei  taiwan</div><div class="line">200     2       http://www.google.com   http://www.google.com   192.168.1.2     taipei  taiwan</div><div class="line">150     3       http://www.google.com   http://www.google.com   192.168.1.3     taipei  taiwan</div><div class="line">300     4       http://www.google.com   http://www.google.com   192.168.1.4     taipei  taiwan</div><div class="line">hive&gt; truncate table page_view_3;</div><div class="line">OK</div><div class="line">Time taken: 0.345 seconds</div><div class="line">hive&gt; select * from page_view_3;</div><div class="line">OK</div><div class="line">Time taken: 0.143 seconds</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Example2:</div><div class="line">load data inpath &quot;/user/hadoop/data/test1.csv&quot; overwrite into table page_view_3 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div><div class="line"></div><div class="line">Result:</div><div class="line">hive&gt; select * from page_view_3;</div><div class="line">OK</div><div class="line">Time taken: 0.129 seconds</div><div class="line">hive&gt; load data inpath &quot;/user/hadoop/data/test1.csv&quot; overwrite into table page_view_3 partition(dt=&quot;taipei&quot;,country=&quot;taiwan&quot;);</div><div class="line">Loading data to table default.page_view_3 partition (dt=taipei, country=taiwan)</div><div class="line">OK</div><div class="line">Time taken: 0.647 seconds</div><div class="line">hive&gt; select * from page_view_3;</div><div class="line">OK</div><div class="line">100     1       http://www.google.com   http://www.google.com   192.168.1.1     taipei  taiwan</div><div class="line">200     2       http://www.google.com   http://www.google.com   192.168.1.2     taipei  taiwan</div><div class="line">150     3       http://www.google.com   http://www.google.com   192.168.1.3     taipei  taiwan</div><div class="line">300     4       http://www.google.com   http://www.google.com   192.168.1.4     taipei  taiwan</div><div class="line">Time taken: 0.109 seconds, Fetched: 4 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<h3 id="create-table-…-as-select"><a href="#create-table-…-as-select" class="headerlink" title="create table ….as select"></a>create table ….as select</h3><blockquote>
<p>create table table_name as select_statement<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">複製一個Table到新Table中(包含資料)</div><div class="line">create table test.pv_4 as select * from page_view_4;</div><div class="line"></div><div class="line">hive&gt; select * from test.pv_4;</div><div class="line">OK</div><div class="line">1       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;100\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;001\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_001\&quot;&quot;,&quot;viewcnt&quot;:100&#125;   taipei  taiwan</div><div class="line">2       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.2\&quot;&quot;,&quot;status&quot;:&quot;\&quot;200\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;002\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_002\&quot;&quot;,&quot;viewcnt&quot;:200&#125;   taipei  taiwan</div><div class="line">3       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.3\&quot;&quot;,&quot;status&quot;:&quot;\&quot;300\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;003\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_003\&quot;&quot;,&quot;viewcnt&quot;:300&#125;   taipei  taiwan</div><div class="line">4       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.4\&quot;&quot;,&quot;status&quot;:&quot;\&quot;400\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;004\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_004\&quot;&quot;,&quot;viewcnt&quot;:400&#125;   taipei  taiwan</div><div class="line">5       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.5\&quot;&quot;,&quot;status&quot;:&quot;\&quot;500\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;005\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_005\&quot;&quot;,&quot;viewcnt&quot;:500&#125;   taipei  taiwan</div><div class="line">6       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.6\&quot;&quot;,&quot;status&quot;:&quot;\&quot;600\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;006\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_006\&quot;&quot;,&quot;viewcnt&quot;:600&#125;   taipei  taiwan</div><div class="line">7       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.7\&quot;&quot;,&quot;status&quot;:&quot;\&quot;700\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;007\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_007\&quot;&quot;,&quot;viewcnt&quot;:700&#125;   taipei  taiwan</div><div class="line">Time taken: 0.087 seconds, Fetched: 7 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="create-table-…like"><a href="#create-table-…like" class="headerlink" title="create table …like"></a>create table …like</h3><blockquote>
<p>CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name<br>  LIKE existing_table_or_view_name<br>  [LOCATION hdfs_path];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">複製一個Table到新Table中(僅 columns)</div><div class="line">create table test.pv_4_like like page_view_4;</div><div class="line">create table if not exists test.pv_4_new like page_view_4;</div><div class="line"></div><div class="line">hive&gt; select * from test.pv_4_new;</div><div class="line">OK</div><div class="line">Time taken: 0.099 seconds</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="from-…insert-select"><a href="#from-…insert-select" class="headerlink" title="from …insert select"></a>from …insert select</h3><blockquote>
<p>FROM from_statement<br>INSERT OVERWRITE TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 …) [IF NOT EXISTS]] select_statement1<br>[INSERT OVERWRITE TABLE tablename2 [PARTITION … [IF NOT EXISTS]] select_statement2]<br>[INSERT INTO TABLE tablename2 [PARTITION …] select_statement2] …;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">from page_view_3 insert overwrite table page_view_3_1 partition(dt=&quot;taipei&quot;,country=&quot;test1&quot;)  </div><div class="line">if not exists </div><div class="line">select page_url,viewTime,userid,viewTime,ip;</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h2 id="Show-Table"><a href="#Show-Table" class="headerlink" title="Show Table"></a>Show Table</h2><h3 id="Show-Tables"><a href="#Show-Tables" class="headerlink" title="Show Tables"></a>Show Tables</h3><blockquote>
<p>SHOW TABLES [IN database_name] [‘identifier_with_wildcards’];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">Demo:</div><div class="line">hive&gt; show tables from test;</div><div class="line">OK</div><div class="line">list_bucket_single</div><div class="line">pv_3</div><div class="line">pv_4</div><div class="line">pv_4_like</div><div class="line">pv_4_new</div><div class="line">test_a</div><div class="line">test_b</div><div class="line">test_c</div><div class="line">test_d</div><div class="line">test_e</div><div class="line">test_f</div><div class="line">Time taken: 0.024 seconds, Fetched: 11 row(s)</div><div class="line">hive&gt; show tables in test;</div><div class="line">OK</div><div class="line">list_bucket_single</div><div class="line">pv_3</div><div class="line">pv_4</div><div class="line">pv_4_like</div><div class="line">pv_4_new</div><div class="line">test_a</div><div class="line">test_b</div><div class="line">test_c</div><div class="line">test_d</div><div class="line">test_e</div><div class="line">test_f</div><div class="line">Time taken: 0.018 seconds, Fetched: 11 row(s)</div><div class="line">hive&gt; show tables in test like &quot;test*&quot;;</div><div class="line">OK</div><div class="line">test_a</div><div class="line">test_b</div><div class="line">test_c</div><div class="line">test_d</div><div class="line">test_e</div><div class="line">test_f</div><div class="line">Time taken: 0.019 seconds, Fetched: 6 row(s)</div><div class="line">hive&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="Show-Table-1"><a href="#Show-Table-1" class="headerlink" title="Show Table"></a>Show Table</h3><blockquote>
<p>SHOW TABLE EXTENDED [IN|FROM database_name] LIKE ‘identifier_with_wildcards’ [PARTITION(partition_spec)];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">show table extended from test like &quot;pv_3&quot;</div><div class="line"></div><div class="line">Demo:</div><div class="line">hive&gt; show table extended from test like &quot;pv_3&quot;;</div><div class="line">OK</div><div class="line">tableName:pv_3</div><div class="line">owner:hadoop</div><div class="line">location:hdfs://mna1:8020/user/hadoop/data</div><div class="line">inputformat:org.apache.hadoop.hive.ql.io.orc.OrcInputFormat</div><div class="line">outputformat:org.apache.hadoop.hive.ql.io.orc.OrcOutputFormat</div><div class="line">columns:struct columns &#123; i32 viewtime, i64 userid, string page_url, string referrer_url, string ip&#125;</div><div class="line">partitioned:true</div><div class="line">partitionColumns:struct partition_columns &#123; string dt, string country&#125;</div><div class="line">totalNumberFiles:1</div><div class="line">totalFileSize:272</div><div class="line">maxFileSize:272</div><div class="line">minFileSize:272</div><div class="line">lastAccessTime:1510037040061</div><div class="line">lastUpdateTime:1510043296966</div><div class="line"></div><div class="line">Time taken: 0.037 seconds, Fetched: 15 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="Show-Table-Properties"><a href="#Show-Table-Properties" class="headerlink" title="Show Table Properties"></a>Show Table Properties</h3><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">hive&gt; SHOW TBLPROPERTIES page_view_7;</div><div class="line">OK</div><div class="line">transient_lastDdlTime   1510042890</div><div class="line">Time taken: 0.029 seconds, Fetched: 1 row(s)</div><div class="line"></div><div class="line">hive&gt; SHOW TBLPROPERTIES page_view_7(&quot;transient_lastDdlTime&quot;);</div><div class="line">OK</div><div class="line">1510042890</div><div class="line">Time taken: 0.029 seconds, Fetched: 1 row(s)</div></pre></td></tr></table></figure>
</blockquote>
<hr>
<h3 id="Show-Create-Table"><a href="#Show-Create-Table" class="headerlink" title="Show Create Table"></a>Show Create Table</h3><blockquote>
<p>SHOW CREATE TABLE ([db_name.]table_name|view_name);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">show create table page_view_7;</div><div class="line"></div><div class="line">Demo:</div><div class="line">hive&gt; show create table page_view_7;</div><div class="line">OK</div><div class="line">CREATE TABLE `page_view_7`(</div><div class="line">  `viewtime` int,</div><div class="line">  `userid` bigint,</div><div class="line">  `page_url` string,</div><div class="line">  `referrer_url` string,</div><div class="line">  `ip` string)</div><div class="line">PARTITIONED BY (</div><div class="line">  `dt` string,</div><div class="line">  `country` string)</div><div class="line">ROW FORMAT SERDE</div><div class="line">  &apos;org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&apos;</div><div class="line">WITH SERDEPROPERTIES (</div><div class="line">  &apos;field.delim&apos;=&apos;,&apos;,</div><div class="line">  &apos;serialization.format&apos;=&apos;,&apos;)</div><div class="line">STORED AS INPUTFORMAT</div><div class="line">  &apos;org.apache.hadoop.mapred.TextInputFormat&apos;</div><div class="line">OUTPUTFORMAT</div><div class="line">  &apos;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&apos;</div><div class="line">LOCATION</div><div class="line">  &apos;hdfs://mna1:8020/user/hive/warehouse/page_view_7&apos;</div><div class="line">TBLPROPERTIES (</div><div class="line">  &apos;transient_lastDdlTime&apos;=&apos;1510042890&apos;)</div><div class="line">Time taken: 0.126 seconds, Fetched: 22 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Describe-Table"><a href="#Describe-Table" class="headerlink" title="Describe Table"></a>Describe Table</h2><h3 id="desc-formatted"><a href="#desc-formatted" class="headerlink" title="desc formatted"></a>desc formatted</h3><blockquote>
<p>DESCRIBE [EXTENDED|FORMATTED]<br>  [db_name.]table_name[.col_name ( [.field_name] | [.’$elem$’] | [.’$key$’] | [.’$value$’] )* ];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">desc formatted page_view_7;</div><div class="line"></div><div class="line">demo:</div><div class="line">desc formatted page_view_7;</div><div class="line">OK</div><div class="line"># col_name              data_type               comment</div><div class="line"></div><div class="line">viewtime                int</div><div class="line">userid                  bigint</div><div class="line">page_url                string</div><div class="line">referrer_url            string</div><div class="line">ip                      string</div><div class="line"></div><div class="line"># Partition Information</div><div class="line"># col_name              data_type               comment</div><div class="line"></div><div class="line">dt                      string</div><div class="line">country                 string</div><div class="line"></div><div class="line"># Detailed Table Information</div><div class="line">Database:               default</div><div class="line">Owner:                  hadoop</div><div class="line">CreateTime:             Tue Nov 07 16:21:30 CST 2017</div><div class="line">LastAccessTime:         UNKNOWN</div><div class="line">Retention:              0</div><div class="line">Location:               hdfs://mna1:8020/user/hive/warehouse/page_view_7</div><div class="line">Table Type:             MANAGED_TABLE</div><div class="line">Table Parameters:</div><div class="line">        transient_lastDdlTime   1510042890</div><div class="line"></div><div class="line"># Storage Information</div><div class="line">SerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe</div><div class="line">InputFormat:            org.apache.hadoop.mapred.TextInputFormat</div><div class="line">OutputFormat:           org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat</div><div class="line">Compressed:             No</div><div class="line">Num Buckets:            -1</div><div class="line">Bucket Columns:         []</div><div class="line">Sort Columns:           []</div><div class="line">Storage Desc Params:</div><div class="line">        field.delim             ,</div><div class="line">        serialization.format    ,</div><div class="line">Time taken: 0.105 seconds, Fetched: 36 row(s)</div><div class="line"></div><div class="line">hive&gt; desc formatted page_view_7 page_url;</div><div class="line">OK</div><div class="line"># col_name              data_type               min                     max                     num_nulls               distinct_count          avg_col_len            max_col_len              num_trues               num_falses              comment</div><div class="line"></div><div class="line">page_url                string                                                                                                                                                                                                                  from deserializer</div><div class="line">Time taken: 0.043 seconds, Fetched: 3 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="desc-extended"><a href="#desc-extended" class="headerlink" title="desc extended"></a>desc extended</h3><blockquote>
<p>desc [extended] [db_name.]table_name[.col_name];<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">hive&gt; desc extended page_view_5 userdata;</div><div class="line">OK</div><div class="line">userdata                map&lt;string,string&gt;      from deserializer</div><div class="line">Time taken: 0.03 seconds, Fetched: 1 row(s)</div><div class="line">hive&gt; desc extended page_view_5 userdata.$key$;</div><div class="line">OK</div><div class="line">$key$                   string                  from deserializer</div><div class="line">Time taken: 0.029 seconds, Fetched: 1 row(s)</div><div class="line">hive&gt; desc extended page_view_5 userdata.$value$;</div><div class="line">OK</div><div class="line">$value$                 string                  from deserializer</div><div class="line">Time taken: 0.03 seconds, Fetched: 1 row(s)</div><div class="line">hive&gt; desc formatted page_view_6;</div><div class="line">OK</div><div class="line"># col_name              data_type               comment</div><div class="line"></div><div class="line">id                      bigint</div><div class="line">data                    struct&lt;page_url:string,ip:string,status:string&gt;</div><div class="line">userdata                map&lt;string,string&gt;</div><div class="line">countlist               array&lt;int&gt;</div><div class="line">hive&gt; desc extended page_view_6 countlist.$elem$;</div><div class="line">OK</div><div class="line">$elem$                  int                     from deserializer</div><div class="line">Time taken: 0.031 seconds, Fetched: 1 row(s)</div><div class="line"></div><div class="line">hive&gt; desc extended page_view_6 data.ip;</div><div class="line">OK</div><div class="line">ip                      string                  from deserializer</div><div class="line">Time taken: 0.064 seconds, Fetched: 1 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h2 id="Drop-Table"><a href="#Drop-Table" class="headerlink" title="Drop Table"></a>Drop Table</h2><h3 id="drop-table"><a href="#drop-table" class="headerlink" title="drop table"></a>drop table</h3><blockquote>
<p>drop table [db_name.]table_name;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">hive&gt; show tables from test like &quot;pv*&quot;;</div><div class="line">OK</div><div class="line">pv_3</div><div class="line">pv_4</div><div class="line">pv_4_like</div><div class="line">pv_4_new</div><div class="line">Time taken: 0.017 seconds, Fetched: 4 row(s)</div><div class="line">hive&gt; drop table test.pv_3;</div><div class="line">OK</div><div class="line">Time taken: 1.598 seconds</div><div class="line">hive&gt; show tables from test like &quot;pv*&quot;;</div><div class="line">OK</div><div class="line">pv_4</div><div class="line">pv_4_like</div><div class="line">pv_4_new</div><div class="line">Time taken: 0.018 seconds, Fetched: 3 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="truncate-table"><a href="#truncate-table" class="headerlink" title="truncate table"></a>truncate table</h3><blockquote>
<p>truncate table [db_name.]table_name;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">hive&gt; select * from test.pv_4;</div><div class="line">OK</div><div class="line">1       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.1\&quot;&quot;,&quot;status&quot;:&quot;\&quot;100\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;001\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_001\&quot;&quot;,&quot;viewcnt&quot;:100&#125;   taipei  taiwan</div><div class="line">2       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.2\&quot;&quot;,&quot;status&quot;:&quot;\&quot;200\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;002\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_002\&quot;&quot;,&quot;viewcnt&quot;:200&#125;   taipei  taiwan</div><div class="line">3       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.3\&quot;&quot;,&quot;status&quot;:&quot;\&quot;300\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;003\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_003\&quot;&quot;,&quot;viewcnt&quot;:300&#125;   taipei  taiwan</div><div class="line">4       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.4\&quot;&quot;,&quot;status&quot;:&quot;\&quot;400\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;004\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_004\&quot;&quot;,&quot;viewcnt&quot;:400&#125;   taipei  taiwan</div><div class="line">5       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.5\&quot;&quot;,&quot;status&quot;:&quot;\&quot;500\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;005\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_005\&quot;&quot;,&quot;viewcnt&quot;:500&#125;   taipei  taiwan</div><div class="line">6       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.6\&quot;&quot;,&quot;status&quot;:&quot;\&quot;600\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;006\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_006\&quot;&quot;,&quot;viewcnt&quot;:600&#125;   taipei  taiwan</div><div class="line">7       &#123;&quot;page_url&quot;:&quot;\&quot;http://www.google.com\&quot;&quot;,&quot;ip&quot;:&quot;\&quot;192.168.1.7\&quot;&quot;,&quot;status&quot;:&quot;\&quot;700\&quot;&quot;&#125;      &#123;&quot;id&quot;:&quot;\&quot;007\&quot;&quot;,&quot;name&quot;:&quot;\&quot;test1_007\&quot;&quot;,&quot;viewcnt&quot;:700&#125;   taipei  taiwan</div><div class="line">Time taken: 0.071 seconds, Fetched: 7 row(s)</div><div class="line">hive&gt; truncate table test.pv_4;</div><div class="line">OK</div><div class="line">Time taken: 0.124 seconds</div><div class="line">hive&gt; select * from test.pv_4;</div><div class="line">OK</div><div class="line">Time taken: 0.063 seconds</div><div class="line">hive&gt; show tables from test like &quot;pv*&quot;;</div><div class="line">OK</div><div class="line">pv_4</div><div class="line">pv_4_like</div><div class="line">pv_4_new</div><div class="line">Time taken: 0.018 seconds, Fetched: 3 row(s)</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h3 id="multi-drop-table"><a href="#multi-drop-table" class="headerlink" title="multi drop table"></a>multi drop table</h3><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Example:</div><div class="line">hive&gt; show tables from test like &quot;pv*&quot;;</div><div class="line">OK</div><div class="line">pv_4</div><div class="line">pv_4_like</div><div class="line">pv_4_new</div><div class="line">Time taken: 0.017 seconds, Fetched: 3 row(s)</div><div class="line"></div><div class="line">[hadoop@mna1 ~]$ hive -e &quot;show tables from test like &apos;pv*&apos;&quot; |xargs -I &apos;&#123;&#125;&apos; hive -e &quot;drop table test.&#123;&#125;&quot;</div><div class="line">hive&gt; show tables from test like &quot;pv*&quot;;</div><div class="line">OK</div><div class="line">Time taken: 1.548 seconds</div></pre></td></tr></table></figure>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/06/[hive]hive_sql_2/" data-id="cjbow7phv000egcll2z5u9015" class="article-share-link">Share</a>
      
        <a href="http://yoursite.com/2017/11/06/[hive]hive_sql_2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/11/06/[hive]hive_sql_1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hive相關語法整理-1
        
      </div>
    </a>
  
  
    <a href="/2017/07/19/[vagrant]打造一個自己開發境境/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">透過vagrant打包一個VM Box</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Excel/">Excel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spark/">Spark</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hive/">hive</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vagrant/">vagrant</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">所有文章</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/27/[hadoop]hadoop_3_install/">Hadoop3.0.0 Cluster環境安裝說明</a>
          </li>
        
          <li>
            <a href="/2017/12/08/[excel]Excel_skill/">Excel之下拉式選單設計技巧-1</a>
          </li>
        
          <li>
            <a href="/2017/11/07/[hive]hive_sql_3/">Hive相關語法整理-3(Partition Table)</a>
          </li>
        
          <li>
            <a href="/2017/11/06/[hive]hive_sql_1/">Hive相關語法整理-1</a>
          </li>
        
          <li>
            <a href="/2017/11/06/[hive]hive_sql_2/">Hive相關語法整理-2(Table)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">優質連結</h3>
    <div class="widget">
      <a href="http://yenyu-lovelan.blogspot.tw/" target="_blank">欲戴王冠 必先承其重~*</a><br>
	  <a href="http://tomkuo139.blogspot.tw/" target="_blank">昭佑 天翔</a><br>
	  <a href="http://rocksaying.tw/" target="_blank">石頭閒語</a><br>
	  <a href="https://blog.toright.com/" target="_blank">Soul & Shell Blog</a><br>
	  <a href="http://yenyu-lovelan.blogspot.tw/" target="_blank">欲戴王冠 必先承其重~*</a><br>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; undefined ~ 2017 popal<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首頁</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/" class="mobile-nav-link">隨筆</a>
  
</nav>
    
<script>
  var disqus_shortname = 'popal';
  
  var disqus_url = 'http://yoursite.com/2017/11/06/[hive]hive_sql_2/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>