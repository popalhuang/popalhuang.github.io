<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hadoop fs command Memo | Popal&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="建立與刪除目錄
1234567891011121314151617181920212223##建立目錄但不會將上層目錄一併建立完成hadoop@hadoop-master:~$hadoop fs -mkdir /user/hadoop/example/lab_1mkdir: `/user/hadoop/example/lab_1&amp;apos;: No such file or directory##">
<meta property="og:type" content="article">
<meta property="og:title" content="hadoop fs command Memo">
<meta property="og:url" content="http://yoursite.com/2018/01/02/[hadoop]hadoop_fs_cmd/index.html">
<meta property="og:site_name" content="Popal's Blog">
<meta property="og:description" content="建立與刪除目錄
1234567891011121314151617181920212223##建立目錄但不會將上層目錄一併建立完成hadoop@hadoop-master:~$hadoop fs -mkdir /user/hadoop/example/lab_1mkdir: `/user/hadoop/example/lab_1&amp;apos;: No such file or directory##">
<meta property="og:image" content="http://yoursite.com/images/hadoop_fs_cmd/tail_1.jpg">
<meta property="og:image" content="http://yoursite.com/images/hadoop_fs_cmd/tail_2_1.jpg">
<meta property="og:image" content="http://yoursite.com/images/hadoop_fs_cmd/tail_2_2.jpg">
<meta property="og:updated_time" content="2018-01-03T05:00:48.798Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hadoop fs command Memo">
<meta name="twitter:description" content="建立與刪除目錄
1234567891011121314151617181920212223##建立目錄但不會將上層目錄一併建立完成hadoop@hadoop-master:~$hadoop fs -mkdir /user/hadoop/example/lab_1mkdir: `/user/hadoop/example/lab_1&amp;apos;: No such file or directory##">
<meta name="twitter:image" content="http://yoursite.com/images/hadoop_fs_cmd/tail_1.jpg">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Popal&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">邊做邊學</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首頁</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/categories/hadoop">Hadoop</a>
        
          <a class="main-nav-link" href="/about">關於我</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-[hadoop]hadoop_fs_cmd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/02/[hadoop]hadoop_fs_cmd/" class="article-date">
  <time datetime="2018-01-02T00:00:00.000Z" itemprop="datePublished">2018-01-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hadoop/">hadoop</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      hadoop fs command Memo
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="toc">
  <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#建立與刪除目錄"><span class="toc-text">建立與刪除目錄</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#檔案建立-複製-刪除-搬移"><span class="toc-text">檔案建立/複製/刪除/搬移</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#put-get操作檔案"><span class="toc-text">put/get操作檔案</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#copy-move操作檔案"><span class="toc-text">copy/move操作檔案</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看檔案內容"><span class="toc-text">查看檔案內容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#檢視壓縮檔案內容-tar-gz"><span class="toc-text">檢視壓縮檔案內容(.tar.gz)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#檢視檔案內容-且資料append到檔案時-會馬上呈現"><span class="toc-text">檢視檔案內容,且資料append到檔案時,會馬上呈現</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#以下使用圖片說明"><span class="toc-text">以下使用圖片說明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#建立空檔案vs-清空檔案內容"><span class="toc-text">建立空檔案vs.清空檔案內容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-find找檔案"><span class="toc-text">使用hadoop fs -find找檔案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-df-du查看檔案目錄的大小"><span class="toc-text">使用hadoop fs -df/-du查看檔案目錄的大小</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-ls查看檔案目錄相關資訊"><span class="toc-text">使用hadoop fs -ls查看檔案目錄相關資訊</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-count查看檔案目錄相關資訊"><span class="toc-text">使用hadoop fs -count查看檔案目錄相關資訊</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-stat查看檔案目錄相關資訊"><span class="toc-text">使用hadoop fs -stat查看檔案目錄相關資訊</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-test檔案測試"><span class="toc-text">使用hadoop fs -test檔案測試</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-setrep-設定檔案複本數"><span class="toc-text">使用hadoop fs -setrep 設定檔案複本數</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用hadoop-fs-rm刪除檔案"><span class="toc-text">使用hadoop fs -rm刪除檔案</span></a></li></ol>
</div>

        <h4 id="建立與刪除目錄"><a href="#建立與刪除目錄" class="headerlink" title="建立與刪除目錄"></a>建立與刪除目錄</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">##建立目錄但不會將上層目錄一併建立完成</div><div class="line">hadoop@hadoop-master:~$hadoop fs -mkdir /user/hadoop/example/lab_1</div><div class="line">mkdir: `/user/hadoop/example/lab_1&apos;: No such file or directory</div><div class="line"></div><div class="line">##建立目錄,會連同上層目錄一併建立</div><div class="line">hadoop@hadoop-master:~$hadoop fs -mkdir -p /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$hadoop fs ls -d /user/hadoop/example</div><div class="line"></div><div class="line">##刪除一個空目錄</div><div class="line">hadoop@hadoop-master:~$hadoop fs -rmdir /user/hadoop/example/lab_1</div><div class="line"></div><div class="line">##透過std in 建立一個test1.txt檔案</div><div class="line">hadoop@hadoop-master:~$hadoop fs -put -f - /user/hadoop/example/test1.txt</div><div class="line"></div><div class="line">##無法刪除,目錄下有檔案</div><div class="line">hadoop@hadoop-master:~$hadoop fs -rmdir  /user/hadoop/example</div><div class="line">&quot;rmdir: `/user/hadoop/example&apos;: Directory is not empty&quot;</div><div class="line"></div><div class="line">##將所有檔案刪除完成後,刪除目錄</div><div class="line">hadoop@hadoop-master:~$hadoop fs -rm -r -f  /user/hadoop/example			</div><div class="line"></div><div class="line">##建立目錄</div><div class="line">hadoop@hadoop-master:~$hadoop fs -mkdir -p /user/hadoop/example/lab_1</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="檔案建立-複製-刪除-搬移"><a href="#檔案建立-複製-刪除-搬移" class="headerlink" title="檔案建立/複製/刪除/搬移"></a>檔案建立/複製/刪除/搬移</h4><h5 id="put-get操作檔案"><a href="#put-get操作檔案" class="headerlink" title="put/get操作檔案"></a>put/get操作檔案</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">hadoop@hadoop-master:~$rm -rf  ~/get_hdfs_test2.txt</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$dd if=/dev/urandom of=test2.txt bs=1K count=1</div><div class="line">1+0 records in</div><div class="line">1+0 records out</div><div class="line">1024 bytes (1.0 kB, 1.0 KiB) copied, 0.00234966 s, 436 kB/s</div><div class="line"></div><div class="line">##使用PUT上傳檔案到HDFS</div><div class="line">hadoop@hadoop-master:~$hadoop fs -put ~/test2.txt /user/hadoop/example/</div><div class="line">hadoop@hadoop-master:~$hadoop fs -ls /user/hadoop/example</div><div class="line">Found 2 items</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 15:40 /user/hadoop/example/lab_1</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/test2.txt</div><div class="line"></div><div class="line">##使用GET下載檔案到Local</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -get /user/hadoop/example/test2.txt ~/get_hdfs_test2.txt</div><div class="line">hadoop@hadoop-master:~$ ls -la ~/get*</div><div class="line">-rw-r--r-- 1 hadoop hadoop 1024 Jan  2 15:44 /home/hadoop/get_hdfs_test2.txt</div><div class="line"></div><div class="line"></div><div class="line">##使用getmerge結合數個檔案內容,並下載至Local</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -put - /user/hadoop/example/lab_1/test1.txt</div><div class="line">1,&quot;test_001&quot;,10000</div><div class="line">2,&quot;test_002&quot;,20000</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -put - /user/hadoop/example/lab_1/test2.txt</div><div class="line">3,&quot;test_003&quot;,30000</div><div class="line">4,&quot;test_004&quot;,40000</div><div class="line">hadoop@hadoop-master:~$ rm -rf ~/merge_file.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -getmerge -nl /user/hadoop/example/lab_1/* ~/merge_file.txt</div><div class="line">hadoop@hadoop-master:~$ ls -la ~/merge_file.txt</div><div class="line">-rw-r--r-- 1 hadoop hadoop 78 Jan  2 15:53 /home/hadoop/merge_file.txt</div><div class="line">hadoop@hadoop-master:~$ cat ~/merge_file.txt</div><div class="line">1,&quot;test_001&quot;,10000</div><div class="line">2,&quot;test_002&quot;,20000</div><div class="line"></div><div class="line">3,&quot;test_003&quot;,30000</div><div class="line">4,&quot;test_004&quot;,40000</div></pre></td></tr></table></figure>
</blockquote>
<h5 id="copy-move操作檔案"><a href="#copy-move操作檔案" class="headerlink" title="copy/move操作檔案"></a>copy/move操作檔案</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div></pre></td><td class="code"><pre><div class="line">## copyfromlocal/copytolocal操作</div><div class="line">hadoop@hadoop-master:~$ dd if=/dev/urandom of=test3.txt bs=1K count=1</div><div class="line">1+0 records in</div><div class="line">1+0 records out</div><div class="line">1024 bytes (1.0 kB, 1.0 KiB) copied, 0.00109903 s, 932 kB/s</div><div class="line">hadoop@hadoop-master:~$ rm -rf ~/cp_hdfs_tolocal_test3.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -copyFromLocal ~/test3.txt /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 3 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -copyToLocal  /user/hadoop/example/lab_1/test3.txt ~/cp_hdfs_tolocal_test3.txt</div><div class="line">hadoop@hadoop-master:~$ ls -la ~/cp_hdfs_tolocal_test3.txt</div><div class="line">-rw-r--r-- 1 hadoop hadoop 1024 Jan  2 16:01 /home/hadoop/cp_hdfs_tolocal_test3.txt</div><div class="line">hadoop@hadoop-master:~$</div><div class="line"></div><div class="line">## cp操作(同一個HDFS中資料複製)</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 3 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cp /user/hadoop/example/test2.txt  /user/hadoop/example/lab_1/test4.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 4 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example</div><div class="line">Found 2 items</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 16:14 /user/hadoop/example/lab_1</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/test2.txt</div><div class="line"></div><div class="line">## cp操作(不同HDFS中資料複製)</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cp hdfs://172.20.22.95:8020/user/hadoop/tmp/test2.csv hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test5.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 5 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cat /user/hadoop/example/lab_1/test5.txt</div><div class="line">id,end_date,start_date,location</div><div class="line">1,2015-10-14 00:00:00,2015-09-14 00:00:00,CA-SF</div><div class="line">2,2015-10-15 01:00:20,2015-08-14 00:00:00,CA-SD</div><div class="line">3,2015-10-16 02:30:00,2015-01-14 00:00:00,NY-NY</div><div class="line">4,2015-10-17 03:00:20,2015-02-14 00:00:00,NY-NY</div><div class="line">5,2015-10-18 04:30:00,2014-04-14 00:00:00,CA-SD</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls hdfs://172.20.22.95:8020/user/hadoop/tmp</div><div class="line">Found 1 items</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2017-11-22 17:09 hdfs://172.20.22.95:8020/user/hadoop/tmp/test2.csv</div><div class="line"></div><div class="line">## moveFromLocal/moveToLocal</div><div class="line">hadoop@hadoop-master:~$ dd if=/dev/urandom of=test6.txt bs=1K count=1</div><div class="line">1+0 records in</div><div class="line">1+0 records out</div><div class="line">1024 bytes (1.0 kB, 1.0 KiB) copied, 0.00116886 s, 876 kB/s</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -moveFromLocal ~/test6.txt /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 6 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -moveToLocal /user/hadoop/example/test6.txt ~/mv_hdfs_tolocal_test6.txt</div><div class="line">moveToLocal: Option &apos;-moveToLocal&apos; is not implemented yet.</div><div class="line"></div><div class="line">## mv操作(同一個HDFS中資料複製),被搬移之後檔案會不見</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 6 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -mv /user/hadoop/example/test2.txt /user/hadoop/example/lab_1/test7.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 7 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example</div><div class="line">Found 1 items</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 16:21 /user/hadoop/example/lab_1</div><div class="line"></div><div class="line">## mv操作(不同一個HDFS中資料複製),如果hadoop版本不一致無法使用mv搬移檔案</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls hdfs://172.20.22.95:8020/user/hadoop/tmp</div><div class="line">Found 1 items</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2017-11-22 17:09 hdfs://172.20.22.95:8020/user/hadoop/tmp/test2.csv</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls hdfs://192.168.51.4:8020/user/hadoop/example/lab_1</div><div class="line">Found 7 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test7.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -mv hdfs://172.20.22.95:8020/user/hadoop/tmp/test2.csv hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test8.txt</div><div class="line">mv: `hdfs://172.20.22.95:8020/user/hadoop/tmp/test2.csv&apos;: Does not match target filesystem</div><div class="line">hadoop@hadoop-master:~$  hadoop fs -cp hdfs://172.20.22.95:8020/user/hadoop/tmp/test2.csv  hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test8.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls hdfs://192.168.51.4:8020/user/hadoop/example/lab_1</div><div class="line">Found 8 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 hdfs://192.168.51.4:8020/user/hadoop/example/lab_1/test8.txt</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="查看檔案內容"><a href="#查看檔案內容" class="headerlink" title="查看檔案內容"></a>查看檔案內容</h4><h5 id="檢視壓縮檔案內容-tar-gz"><a href="#檢視壓縮檔案內容-tar-gz" class="headerlink" title="檢視壓縮檔案內容(.tar.gz)"></a>檢視壓縮檔案內容(.tar.gz)</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">hadoop@hadoop-master:~$ tar -zcvf ~/test9.tar.gz &quot;test1.csv&quot; &quot;test2.csv&quot; &quot;test3.csv&quot;</div><div class="line">test1.csv</div><div class="line">test2.csv</div><div class="line">test3.csv</div><div class="line">hadoop@hadoop-master:~$ tar -ztvf ~/test9.tar.gz</div><div class="line">-rw-rw-r-- hadoop/hadoop   272 2017-11-08 15:49 test1.csv</div><div class="line">-rw-rw-r-- hadoop/hadoop   300 2017-11-06 19:14 test2.csv</div><div class="line">-rw-rw-r-- hadoop/hadoop   422 2017-08-21 16:30 test3.csv</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -put ~/test9.tar.gz /user/hadoop/example/lab_1/</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 9 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:50 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">##可以使用hadoop fs -text來查看壓縮檔案內容</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -text /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line">test1.csv0000664000175100017510000000042013200533434012136 0ustar  hadoophadoop100,1,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.1&quot;</div><div class="line">200,2,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.2&quot;</div><div class="line">150,3,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.3&quot;</div><div class="line">300,4,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.4&quot;</div><div class="line">..........</div><div class="line">5,&quot;http://www.google.com&quot;;&quot;192.168.1.5&quot;;&quot;201&quot;,&quot;005&quot;;&quot;test1_005&quot;;&quot;500&quot;</div><div class="line">6,&quot;http://www.google.com&quot;;&quot;192.168.1.6&quot;;&quot;403&quot;,&quot;006&quot;;&quot;test1_006&quot;;&quot;1600&quot;</div><div class="line"></div><div class="line">##hadoop fs -cat查看壓縮檔時,會出現亂碼,需要配合zcat指令來查看</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cat /user/hadoop/example/lab_1/test9.tar.gz | zcat</div><div class="line">test1.csv0000664000175100017510000000042013200533434012136 0ustar  hadoophadoop100,1,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.1&quot;</div><div class="line">200,2,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.2&quot;</div><div class="line">150,3,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.3&quot;</div><div class="line">300,4,&quot;http://www.google.com&quot;,&quot;http://www.google.com&quot;,&quot;192.168.1.4&quot;</div><div class="line">..........</div><div class="line">5,&quot;http://www.google.com&quot;;&quot;192.168.1.5&quot;;&quot;201&quot;,&quot;005&quot;;&quot;test1_005&quot;;&quot;500&quot;</div><div class="line">6,&quot;http://www.google.com&quot;;&quot;192.168.1.6&quot;;&quot;403&quot;,&quot;006&quot;;&quot;test1_006&quot;;&quot;1600&quot;</div></pre></td></tr></table></figure>
</blockquote>
<h5 id="檢視檔案內容-且資料append到檔案時-會馬上呈現"><a href="#檢視檔案內容-且資料append到檔案時-會馬上呈現" class="headerlink" title="檢視檔案內容,且資料append到檔案時,會馬上呈現"></a>檢視檔案內容,且資料append到檔案時,會馬上呈現</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">##hadoop fs -tail指令的功能(與cat/text相同可以觀察檔案內容)</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -tail /user/hadoop/example/lab_1/test1.txt</div><div class="line">1,&quot;test_001&quot;,10000</div><div class="line">2,&quot;test_002&quot;,20000</div></pre></td></tr></table></figure>
</blockquote>
<h6 id="以下使用圖片說明"><a href="#以下使用圖片說明" class="headerlink" title="以下使用圖片說明"></a>以下使用圖片說明</h6><blockquote>
<p>hadoop fs -tail時,可以查看檔案完整內容<br><img src="/images/hadoop_fs_cmd/tail_1.jpg" alt=""><br>hadoop fs -tail -f 時,持續呈現檔案Append的相關內容<br><img src="/images/hadoop_fs_cmd/tail_2_1.jpg" alt=""><br><img src="/images/hadoop_fs_cmd/tail_2_2.jpg" alt=""></p>
</blockquote>
<h4 id="建立空檔案vs-清空檔案內容"><a href="#建立空檔案vs-清空檔案內容" class="headerlink" title="建立空檔案vs.清空檔案內容"></a>建立空檔案vs.清空檔案內容</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">##使用 -touchz建立一個空的檔案,常用於建立時戳或者flag檔案</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 9 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         76 2018-01-02 17:28 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -touchz /user/hadoop/example/lab_1/test10.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 10 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         76 2018-01-02 17:28 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1/test10.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cat /user/hadoop/example/lab_1/test1.txt</div><div class="line">1,&quot;test_001&quot;,10000</div><div class="line">2,&quot;test_002&quot;,20000</div><div class="line">3,&quot;test_003&quot;,30000</div><div class="line">4,&quot;test_004&quot;,40000</div><div class="line"></div><div class="line">## -truncate -w 10,只留10 bytes資料</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -truncate -w 10 /user/hadoop/example/lab_1/test1.txt</div><div class="line">Waiting for /user/hadoop/example/lab_1/test1.txt ...</div><div class="line">Truncated /user/hadoop/example/lab_1/test1.txt to length: 10</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cat /user/hadoop/example/lab_1/test1.txt</div><div class="line">1,&quot;test_00</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         10 2018-01-02 17:42 /user/hadoop/example/lab_1/test1.txt</div><div class="line"></div><div class="line">## -truncate -w 0,資料全部清空</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -truncate -w 0 /user/hadoop/example/lab_1/test1.txt</div><div class="line">Truncated /user/hadoop/example/lab_1/test1.txt to length: 0</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -cat /user/hadoop/example/lab_1/test1.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:45 /user/hadoop/example/lab_1/test1.txt</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-find找檔案"><a href="#使用hadoop-fs-find找檔案" class="headerlink" title="使用hadoop fs -find找檔案"></a>使用hadoop fs -find找檔案</h4><blockquote>
<p>此部分可以參考Linux find指令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">說明:</div><div class="line">-iname pattern 所要查找的文檔名，不區分大小寫</div><div class="line">-name pattern  所要查找的文檔名，區分大小寫</div><div class="line">-print 換行列印</div><div class="line">-print0 連續列印</div><div class="line"></div><div class="line">##-name後,可接欲找尋的檔案名稱,&quot;*&quot;代表任何值</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -find / -name &quot;test*.txt&quot; -print</div><div class="line">/user/hadoop/example/lab_1/test1.txt</div><div class="line">/user/hadoop/example/lab_1/test10.txt</div><div class="line">/user/hadoop/example/lab_1/test2.txt</div><div class="line">/user/hadoop/example/lab_1/test3.txt</div><div class="line">/user/hadoop/example/lab_1/test4.txt</div><div class="line">/user/hadoop/example/lab_1/test5.txt</div><div class="line">/user/hadoop/example/lab_1/test6.txt</div><div class="line">/user/hadoop/example/lab_1/test7.txt</div><div class="line">/user/hadoop/example/lab_1/test8.txt</div><div class="line">/user/hadoop/test1.txt</div><div class="line">##-name後,可接正規式的相關參數</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -find / -name &quot;[A-Z,a-z]*.db&quot; -print</div><div class="line">/user/hive/warehouse/test1.db</div><div class="line">/user/hive/warehouse/test2.db</div><div class="line">/user/hive/warehouse/test3.db</div><div class="line">/user/hive/warehouse/test4.db</div><div class="line">/user/hive/warehouse/test5.db</div><div class="line">/user/hive/warehouse/test6.db</div></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="使用hadoop-fs-df-du查看檔案目錄的大小"><a href="#使用hadoop-fs-df-du查看檔案目錄的大小" class="headerlink" title="使用hadoop fs -df/-du查看檔案目錄的大小"></a>使用hadoop fs -df/-du查看檔案目錄的大小</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">##後面如果都沒接任何參數,看各個檔案的大小(以byte為單位)及檔名</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -du /user/hadoop/example/lab_1</div><div class="line">0     0     /user/hadoop/example/lab_1/test1.txt</div><div class="line">0     0     /user/hadoop/example/lab_1/test10.txt</div><div class="line">38    76    /user/hadoop/example/lab_1/test2.txt</div><div class="line">1024  2048  /user/hadoop/example/lab_1/test3.txt</div><div class="line">1024  2048  /user/hadoop/example/lab_1/test4.txt</div><div class="line">272   544   /user/hadoop/example/lab_1/test5.txt</div><div class="line">1024  2048  /user/hadoop/example/lab_1/test6.txt</div><div class="line">1024  2048  /user/hadoop/example/lab_1/test7.txt</div><div class="line">272   544   /user/hadoop/example/lab_1/test8.txt</div><div class="line">373   746   /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">##加入&quot;-h&quot;,在顯示檔案大小時,會將單位標示出來</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -du -h /user/hadoop/example/lab_1</div><div class="line">0    0    /user/hadoop/example/lab_1/test1.txt</div><div class="line">0    0    /user/hadoop/example/lab_1/test10.txt</div><div class="line">38   76   /user/hadoop/example/lab_1/test2.txt</div><div class="line">1 K  2 K  /user/hadoop/example/lab_1/test3.txt</div><div class="line">1 K  2 K  /user/hadoop/example/lab_1/test4.txt</div><div class="line">272  544  /user/hadoop/example/lab_1/test5.txt</div><div class="line">1 K  2 K  /user/hadoop/example/lab_1/test6.txt</div><div class="line">1 K  2 K  /user/hadoop/example/lab_1/test7.txt</div><div class="line">272  544  /user/hadoop/example/lab_1/test8.txt</div><div class="line">373  746  /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">##加入&quot;-s&quot;,最主要是用來顯示該目錄下所有檔案的summary後的大小</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -du -h -s /user/hadoop/example/lab_1</div><div class="line">4.9 K  9.9 K  /user/hadoop/example/lab_1</div><div class="line"></div><div class="line">##hadoop fs -du 加入&quot;-v&quot;,可以看到每個欄位的標題</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -du -h -v  /user/hadoop/example/lab_1</div><div class="line">SIZE  DISK_SPACE_CONSUMED_WITH_ALL_REPLICAS  FULL_PATH_NAME</div><div class="line">0     0                                      /user/hadoop/example/lab_1/test1.txt</div><div class="line">0     0                                      /user/hadoop/example/lab_1/test10.txt</div><div class="line">38    76                                     /user/hadoop/example/lab_1/test2.txt</div><div class="line">1 K   2 K                                    /user/hadoop/example/lab_1/test3.txt</div><div class="line">1 K   2 K                                    /user/hadoop/example/lab_1/test4.txt</div><div class="line">272   544                                    /user/hadoop/example/lab_1/test5.txt</div><div class="line">1 K   2 K                                    /user/hadoop/example/lab_1/test6.txt</div><div class="line">1 K   2 K                                    /user/hadoop/example/lab_1/test7.txt</div><div class="line">272   544                                    /user/hadoop/example/lab_1/test8.txt</div><div class="line">373   746                                    /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">## hadoop fs -df 顯示HDFS系統(多個)剩餘空間</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -df hdfs://172.20.22.95:8020 hdfs://192.168.51.4:8020</div><div class="line">Filesystem                         Size         Used      Available  Use%</div><div class="line">hdfs://172.20.22.95:8020  2232839094272  29245636608  1911548899328    1%</div><div class="line">hdfs://192.168.51.4:8020    42002972672     47734784    26333745152    0%</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-ls查看檔案目錄相關資訊"><a href="#使用hadoop-fs-ls查看檔案目錄相關資訊" class="headerlink" title="使用hadoop fs -ls查看檔案目錄相關資訊"></a>使用hadoop fs -ls查看檔案目錄相關資訊</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">##</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example</div><div class="line">Found 2 items</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1</div><div class="line">-rw-r--r--   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line"></div><div class="line">##-r  Reverse the order of the sort</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls -r /user/hadoop/example</div><div class="line">Found 2 items</div><div class="line">-rw-r--r--   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1</div><div class="line"></div><div class="line">## 檢視&quot;-R&quot;遞回目錄下所有檔案及目錄</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls -R /user/hadoop/example</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:45 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1/test10.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line">-rw-r--r--   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line"></div><div class="line">## &quot;-d&quot;只顯示目前只定的檔案或目錄</div><div class="line">hadoop fs -ls -d /user/hadoop/example</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-02 18:29 /user/hadoop/example</div><div class="line"></div><div class="line">## &quot;-e&quot; Display the erasure coding policy of files and directories.</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls -e /user/hadoop/example/lab_1</div><div class="line">Found 10 items</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated          0 2018-01-02 17:45 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated          0 2018-01-02 17:38 /user/hadoop/example/lab_1/test10.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2  hadoop supergroup Replicated        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-count查看檔案目錄相關資訊"><a href="#使用hadoop-fs-count查看檔案目錄相關資訊" class="headerlink" title="使用hadoop fs -count查看檔案目錄相關資訊"></a>使用hadoop fs -count查看檔案目錄相關資訊</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">##計算指定的目錄或檔案的數量大小</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -count &quot;/user/hadoop/example/*&quot;</div><div class="line">           1           10               5051 /user/hadoop/example/lab_1</div><div class="line">           0            1                 36 /user/hadoop/example/test.txt</div><div class="line"></div><div class="line">## &quot;-q&quot;選項會多出以下欄位</div><div class="line">## QUOTA,REM_QUOTA,SPACE_QUOTA,REM_SPACE_QUOTA,DIR_COUNT,FILE_COUNT,CONTENT_SIZE,PATHNAME	   </div><div class="line">hadoop@hadoop-master:~$ hadoop fs -count -q &quot;/user/hadoop/example/*&quot;</div><div class="line">        none             inf            none             inf            1           10               5051 /user/hadoop/example/lab_1</div><div class="line">        none             inf            none             inf            0            1                 36 /user/hadoop/example/test.txt</div><div class="line"></div><div class="line">## &quot;-u&quot; option shows the quota and the usage against the quota without the detailed content summary</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -count -u &quot;/user/hadoop/example/*&quot;</div><div class="line">        none             inf            none             inf /user/hadoop/example/lab_1</div><div class="line">        none             inf            none             inf /user/hadoop/example/test.txt</div><div class="line"></div><div class="line">## &quot;-e&quot; option shows the erasure coding policy.</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -count -e &quot;/user/hadoop/example/*&quot;</div><div class="line">           1           10               5051 EC: /user/hadoop/example/lab_1</div><div class="line">           0            1                 36 Replicated /user/hadoop/example/test.txt</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-stat查看檔案目錄相關資訊"><a href="#使用hadoop-fs-stat查看檔案目錄相關資訊" class="headerlink" title="使用hadoop fs -stat查看檔案目錄相關資訊"></a>使用hadoop fs -stat查看檔案目錄相關資訊</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">##相關-stat Format說明</div><div class="line">%a: octal</div><div class="line">%A: symbolic</div><div class="line">%b: filesize in bytes</div><div class="line">%F: type</div><div class="line">%g: group name of owner</div><div class="line">%n: name</div><div class="line">%o: block size</div><div class="line">%r: replication</div><div class="line">%u: user name of owner</div><div class="line">%x,%X :access date</div><div class="line">%y,%Y :modification date</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$ hadoop fs -stat /user/*</div><div class="line">2018-01-02 09:05:22</div><div class="line">2017-12-26 10:44:41</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$ hadoop fs -stat &quot;%A,perm:%a,type:%F,%u:%g,size:%b,block size:%o,%r,mtime:%y atime:%x name:%n&quot; &quot;/user/hadoop/example/lab_1/*&quot;</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:0,block size:67108864,2,mtime:2018-01-02 09:45:22 atime:2018-01-02 09:18:30 name:test1.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:0,block size:67108864,2,mtime:2018-01-02 09:38:21 atime:2018-01-02 09:38:21 name:test10.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:38,block size:67108864,2,mtime:2018-01-02 07:51:41 atime:2018-01-02 07:51:16 name:test2.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:1024,block size:67108864,2,mtime:2018-01-02 07:59:28 atime:2018-01-02 07:59:28 name:test3.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:1024,block size:67108864,2,mtime:2018-01-02 08:07:12 atime:2018-01-02 08:07:12 name:test4.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:272,block size:67108864,2,mtime:2018-01-02 08:11:21 atime:2018-01-02 08:11:21 name:test5.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:1024,block size:67108864,2,mtime:2018-01-02 08:14:24 atime:2018-01-02 08:14:23 name:test6.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:1024,block size:67108864,2,mtime:2018-01-02 07:40:46 atime:2018-01-02 07:40:46 name:test7.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:272,block size:67108864,2,mtime:2018-01-02 08:31:28 atime:2018-01-02 08:31:28 name:test8.txt</div><div class="line">rw-r--r--,perm:644,type:regular file,hadoop:supergroup,size:373,block size:67108864,2,mtime:2018-01-02 09:05:38 atime:2018-01-02 09:05:37 name:test9.tar.gz</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-test檔案測試"><a href="#使用hadoop-fs-test檔案測試" class="headerlink" title="使用hadoop fs -test檔案測試"></a>使用hadoop fs -test檔案測試</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line">##相關參數說明:</div><div class="line">-d  return 0 if &lt;path&gt; is a directory.</div><div class="line">-e  return 0 if &lt;path&gt; exists.</div><div class="line">-f  return 0 if &lt;path&gt; is a file.</div><div class="line">-s  return 0 if file &lt;path&gt; is greater than zero bytes in size.</div><div class="line">-w  return 0 if file &lt;path&gt; exists and write permission is granted.</div><div class="line">-r  return 0 if file &lt;path&gt; exists and read permission is granted.</div><div class="line">-z  return 0 if file &lt;path&gt; is zero bytes in size, else return 1.</div><div class="line">---</div><div class="line"></div><div class="line">## &quot;-e&quot; 判斷指定的路徑是否存在(0:是,1:否)</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -e /user/hadoop</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -e /user/vagrant</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line"></div><div class="line">## &quot;-d&quot; 判斷是否為目錄(0:是,1:否)</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -d /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -d /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line"></div><div class="line"></div><div class="line">## &quot;-f&quot; 判斷是否為目錄(0:是,1:否)</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -f /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -f /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line"></div><div class="line">## &quot;-w&quot;判斷檔案是否有寫的權限</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/test.txt</div><div class="line">-rwxr-xr-x   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -w  /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line">hadoop@hadoop-master:~$ su - popal</div><div class="line">Password:</div><div class="line">popal@hadoop-master:~$ /bgdt/hadoop-3.0.0/bin/hadoop fs -test -w  /user/hadoop/example/test.txt</div><div class="line">popal@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -chmod 766 /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/test.txt</div><div class="line">-rwxrw-rw-   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ su - popal</div><div class="line">Password:</div><div class="line">popal@hadoop-master:~$ /bgdt/hadoop-3.0.0/bin/hadoop fs -test -w /user/hadoop/example/test.txt</div><div class="line">popal@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line"></div><div class="line">## &quot;-r&quot;判斷檔案是否有讀的權限</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/test.txt</div><div class="line">-rwxrw-rw-   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ su - popal</div><div class="line">Password:</div><div class="line">popal@hadoop-master:~$ /bgdt/hadoop-3.0.0/bin/hadoop fs -test -r /user/hadoop/example/test.txt</div><div class="line">popal@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line">popal@hadoop-master:~$ exit</div><div class="line">logout</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -chmod 700 /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/test.txt</div><div class="line">-rwx------   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line">hadoop@hadoop-master:~$ su - popal</div><div class="line">Password:</div><div class="line">popal@hadoop-master:~$ /bgdt/hadoop-3.0.0/bin/hadoop fs -test -r /user/hadoop/example/test.txt</div><div class="line">popal@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line"></div><div class="line">## &quot;-z&quot;判斷檔案是否為0 bytes</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 10 items</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:45 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1/test10.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -z /user/hadoop/example/lab_1/test1.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">0</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -z /user/hadoop/example/lab_1/test2.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line"></div><div class="line">## &quot;-s&quot;判斷檔案是否不為0 bytes</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -s /user/hadoop/example/lab_1/test1.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -test -s /user/hadoop/example/lab_1/test2.txt</div><div class="line">hadoop@hadoop-master:~$ echo $?</div><div class="line">0</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-setrep-設定檔案複本數"><a href="#使用hadoop-fs-setrep-設定檔案複本數" class="headerlink" title="使用hadoop fs -setrep 設定檔案複本數"></a>使用hadoop fs -setrep 設定檔案複本數</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 10 items</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:45 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1/test10.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$ hadoop fs -setrep -w 1 /user/hadoop/example/lab_1/test1.txt</div><div class="line">Replication 1 set: /user/hadoop/example/lab_1/test1.txt</div><div class="line">Waiting for /user/hadoop/example/lab_1/test1.txt ... done</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">Found 10 items</div><div class="line">-rw-r--r--   1 hadoop supergroup          0 2018-01-02 17:45 /user/hadoop/example/lab_1/test1.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-02 17:38 /user/hadoop/example/lab_1/test10.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup         38 2018-01-02 15:51 /user/hadoop/example/lab_1/test2.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:59 /user/hadoop/example/lab_1/test3.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:07 /user/hadoop/example/lab_1/test4.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:11 /user/hadoop/example/lab_1/test5.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 16:14 /user/hadoop/example/lab_1/test6.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup       1024 2018-01-02 15:40 /user/hadoop/example/lab_1/test7.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        272 2018-01-02 16:31 /user/hadoop/example/lab_1/test8.txt</div><div class="line">-rw-r--r--   2 hadoop supergroup        373 2018-01-02 17:05 /user/hadoop/example/lab_1/test9.tar.gz</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="使用hadoop-fs-rm刪除檔案"><a href="#使用hadoop-fs-rm刪除檔案" class="headerlink" title="使用hadoop fs -rm刪除檔案"></a>使用hadoop fs -rm刪除檔案</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">## hadoop fs -rm指令,只能刪檔案</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rm  /user/hadoop/example/lab_1/*</div><div class="line">Deleted /user/hadoop/example/lab_1/test1.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test10.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test2.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test3.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test4.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test5.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test6.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test7.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test8.txt</div><div class="line">Deleted /user/hadoop/example/lab_1/test9.tar.gz</div><div class="line"></div><div class="line">## &quot;-rm&quot;無法刪目錄,如要刪除目錄需要用&quot;-rmdir or -rm -r&quot;</div><div class="line">hadoop fs -rm  /user/hadoop/example</div><div class="line">rm: `/user/hadoop/example&apos;: Is a directory</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rmdir  /user/hadoop/example</div><div class="line">rmdir: `/user/hadoop/example&apos;: Directory is not empty</div><div class="line"></div><div class="line">## &quot;-rmdir&quot;只能刪除空目錄</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rmdir /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example/lab_1</div><div class="line">ls: `/user/hadoop/example/lab_1&apos;: No such file or directory</div><div class="line"></div><div class="line">## &quot;-rm -r&quot;,可以刪除所有檔案</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -mkdir /user/hadoop/example/lab_1</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -touchz /user/hadoop/example/lab_1/test1.txt</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rmdir /user/hadoop/example/lab_1</div><div class="line">rmdir: `/user/hadoop/example/lab_1&apos;: Directory is not empty</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rm /user/hadoop/example/lab_1</div><div class="line">rm: `/user/hadoop/example/lab_1&apos;: Is a directory</div><div class="line"></div><div class="line">## &quot;-rm -r&quot;,會將刪除的檔案或目錄先丟到垃圾桶</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rm -r /user/hadoop/example/lab_1</div><div class="line">2018-01-03 11:38:37,066 INFO fs.TrashPolicyDefault: </div><div class="line">Moved: &apos;hdfs://hadoop-master:8020/user/hadoop/example/lab_1&apos; to trash </div><div class="line">at: hdfs://hadoop-master:8020/user/hadoop/.Trash/Current/user/hadoop/example/lab_1</div><div class="line"></div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls /user/hadoop/example</div><div class="line">Found 1 items</div><div class="line">-rwx------   2 hadoop supergroup         36 2018-01-02 18:29 /user/hadoop/example/test.txt</div><div class="line"></div><div class="line">##檢查垃圾桶</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -ls -R /user/hadoop/.Trash</div><div class="line">drwx------   - hadoop supergroup          0 2018-01-03 11:38 /user/hadoop/.Trash/Current</div><div class="line">drwx------   - hadoop supergroup          0 2018-01-03 11:38 /user/hadoop/.Trash/Current/user</div><div class="line">drwx------   - hadoop supergroup          0 2018-01-03 11:38 /user/hadoop/.Trash/Current/user/hadoop</div><div class="line">drwx------   - hadoop supergroup          0 2018-01-03 11:38 /user/hadoop/.Trash/Current/user/hadoop/example</div><div class="line">drwxr-xr-x   - hadoop supergroup          0 2018-01-03 11:37 /user/hadoop/.Trash/Current/user/hadoop/example/lab_1</div><div class="line">-rw-r--r--   2 hadoop supergroup          0 2018-01-03 11:37 /user/hadoop/.Trash/Current/user/hadoop/example/lab_1/test1.txt</div><div class="line"></div><div class="line">## &quot;-rm -r -skipTrash&quot;,會直接刪除目錄或檔案,並且不會進垃圾桶</div><div class="line">hadoop@hadoop-master:~$ hadoop fs -rm -r -skipTrash /user/hadoop/example/lab_1</div><div class="line">Deleted /user/hadoop/example/lab_1</div></pre></td></tr></table></figure>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/02/[hadoop]hadoop_fs_cmd/" data-id="cjxoiu3t5000w4fp65evq8tfx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/01/02/[hadoop]Hadoop_permission_memo/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hadoop權限操作說明
        
      </div>
    </a>
  
  
    <a href="/2017/12/29/[spark]spark2.2.1_Install/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Spark2.2.1環境安裝說明</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/excel/">excel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hive/">hive</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spark/">spark</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/test/">test</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vagrant/">vagrant</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">所有文章</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/05/28/[test]test1/">Test</a>
          </li>
        
          <li>
            <a href="/2018/01/09/[hadoop]Hadoop3.0.0_doc/">Hadoop3.0.0 Document List</a>
          </li>
        
          <li>
            <a href="/2018/01/09/[hadoop]Hadoop3.0.0_overview/">Hadoop 3.0.0 Overview</a>
          </li>
        
          <li>
            <a href="/2018/01/09/[hadoop]hadoop3.0.0_quota_cmd/">Hadoop3.0.0 Quota</a>
          </li>
        
          <li>
            <a href="/2018/01/09/[spark]spark2.2.1_RDD_Memo_1/">PySpark-RDD Memo_1</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">優質連結</h3>
    <div class="widget">
      <a href="http://yenyu-lovelan.blogspot.tw/" target="_blank">欲戴王冠 必先承其重~*</a><br>
	  <a href="http://tomkuo139.blogspot.tw/" target="_blank">昭佑 天翔</a><br>
	  <a href="http://rocksaying.tw/" target="_blank">石頭閒語</a><br>
	  <a href="https://blog.toright.com/" target="_blank">Soul & Shell Blog</a><br>	  
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 ~ 2019 popal<br>
      Powered by <a href="http://popalhuang.github.io/" target="_blank">popal Blog</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首頁</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/categories/hadoop" class="mobile-nav-link">Hadoop</a>
  
    <a href="/about" class="mobile-nav-link">關於我</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>